import{h as L,_ as v}from"./staricon.0523acfd.js";import{_ as y,a as x}from"./line1.79af986b.js";import{_ as T}from"./townhall-quiet.bad14889.js";import{_ as F,o as r,c as n,a as o,q as A,h as _,F as C,d as R,g as c,t as d}from"./vendor.395bafa6.js";var b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAzCAYAAADLqmunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAT6SURBVHgB5ZrXS+VAFMbPtXcs2AsqIr6IYgcfLdhR/D+tKL6oKApWVFAUK4oNsfe+u98ss8R4ZzLJndy74A+C3CQm+TJfZs45M55ff6AfRBD9MELIRV5eXuj8/JyOjo7o5uaG/X5+fqbPz8+/Nw8JYVtYWBglJiZSZmYmpaamsn1u4dFtaYg5ODig3d1dJvTu7s7W/0dERFBOTg4VFhayFxAcHEw60SYYl9nY2KCFhQXbIkVERUVRRUUFFRUVaWt1LYL39vZocXGRzs7OyA0SEhKourqa8vPzyVd8Evz6+kqzs7O0urpK/ujsS0pKWIuHh4eTUxwLvr+/p+HhYdYp+RO0dmtrK8XFxZETHAm+vb2lwcFB1vMGgsjISOrs7GTi7WJ7HL66uqL+/v6AiQVPT0/shTvpHG0JxhgKG+vqhX0Bn1Rvby89Pj7a+j9lwXD+6OhoQFvWDESPjIz8C2RUUBa8srJC+/v7FCgQkNTW1n7roU9PT2l5eVn5OkqCYeGZmRkKFAg6Ghsb2bDU3Nz8LQhBDHB9fa10LSXB8/PztmyjE7RsS0sLZWVlsd8ZGRnU1dXFemrO29sbzc3NKV3PUjDG2a2tLQoEEIuW5WI5ycnJ1NTU9MXe29vbdHFxYXlNS8H4dj8+PsjfcBubxXLS09OZvUNDQ//tU2llqeD393eW8fgbs41FpKSkfDnn+PiYpaAypIIhFl2/PxHZ2BvT09MsceFALFJTGVLBOzs75E+sbGxkbGyM1tbWvu1HHi69h+gAemV/2lm1ZdGfTE1NsdzbGxiX8SmK8mdhCz88PLDNH9ixMcR6a1kOQk3E2iKEgo21JzfRYWMjCIFlgoWWRnKvAh4YFnKCLhubkSUUwhZG9GIFKozd3d2UlpZGdtFpYzOyoUko2CrYgNj29nZKSkqijo4OVmFURbeNzchqGkLBQUHiEYuHdqgnAwjA7+zsbLJCNajAC5+YmFC2sRGPxyM8JlTFxZiBfVFTio6O/rIfcW1DQ4PU3m7a2HwfEULB3iqDENPW1sbqxaIbieztto2NyKqaQsFIv8zWQF5sNTZze2P2gGPHxpOTk45szMEzO2phCI6JifmyD2IHBgYsyzx4w/X19cwRdmNj1Lh9wdtzG5F2WkjBzEB0X1+fZSGP2xufgKqNfRUL8JJl0zLS5EE0tQHRPT09rGQrAzdGCidDh42N5ObmSo9LBaNlRN+Dqr2t0GFjDkYWnwTjAjI7qtpbhC4bc2QNxLEs8VRWVkqPq9rbiG4bA/TOxcXFludZCsb8DSanZdi1t04bc2BllfBWqUyLKUpjscwbqvYeHx/XLhZUVVUpnackOD4+nsrLyy3Pk9mb23h9fZ10A7FIYlRQnmopLS1lGZIVInu7YWOAWAHPpoqyYAQiqAObkwZvmO3tlo0RVdXV1dla/2F7QhyT4ZimVKl34eWgI9nc3CTdIIFBA6i4zoijFQCXl5dMtFXR2y3wIpGMIC+3i+M1HvhGh4aGlGftdIG1HRCLhWxO8GkVD1qYr+LxB4gHampqpNmQFVrWaeEbxUQWvm83wLBYVlbGFqj5iraVeKhyokqxtLQkrQvbAXk1hhxsupYgal9rCeGHh4cswMBfuzVriEROW1BQQHl5ecLamlO0CzaCYv7JyQmbo0LnxlfT8peAsR3DC7bY2Fg2u4/8WVQz04Grgv9HftwC8d8198M3hr7DewAAAABJRU5ErkJggg==",U="data:image/png;base64,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";const B={name:"Proposal",data(){return{slug:this.$route.params.slug,proposals:[],index:0}},computed:{role(){return this.$parent.$parent.role}},created(){this.getProposalList(-1)},mounted(){},methods:{trimmedAccountAddress(e){return e.length>10?e.slice(0,5)+"..."+e.slice(e.length-5,e.length):e},trimmedAccountNameAndLowercase(e){let s=e.replace(/[, ]+/g,"").trim().toLowerCase();return s.length>12?s.slice(0,9)+"..."+s.slice(s.length-4,s.length):s},trimmedProposalTitle(e){return e.length>56?e.slice(0,56)+"...":e},trimmedAnnounceSummary(e){return e.length>334?e.slice(0,334)+"...":e},calculateWinner(e){if(e.quorum_status){let s=e.totalToken*e.percent/100;return e.s_result&&e.s_result[0].option>s?e.s_result[0].option+" is a winner":e.result&&e.result[0].option>s?e.result[0].option+" is a winner":"N/A. Proposal do not meet the quorum threshold"}else return e.s_result?e.s_result[0].option+" is a winner":e.result[0].option+" is a winner"},goProposalDetail(e){this.$router.push(`/proposal/detail/${e}`)},goCreateProposal(){this.$router.push(`/proposal/create/${this.slug}`)},getProposalList(e){this.index=e,api.getProposalList({slug:this.slug,index:this.index},s=>{this.proposals=s.data.list,console.log(this.proposals),this.proposals.map(i=>{let u=new Date,a=u.getTimezoneOffset()*60*1e3,l=u.getTime()-a,t=L().utcOffset(i.timezone.offset).utcOffset()*60*1e3,P=new Date(i.f_start_at).getTime()-t,p=new Date(i.f_end_at).getTime()-t,k=P-l,h=p-l;if(k>0)i.passed=0,i.leftTime="Comming soon";else if(l>p)i.passed=2,i.leftTime="Finished";else{i.passed=1;let m=parseInt(h/(1e3*3600*24)),g=parseInt((h-m*1e3*3600*24)/(1e3*3600)),f=parseInt((h-m*1e3*3600*24-g*1e3*3600)/(1e3*60));console.log(f),i.leftTime=`${m} days ${g} hours ${f} minutes`}})},s=>{console.log(s)})}}},E={class:"head p-2",style:{width:"100%"}},K=o("span",{class:"px-3 py-1 fs-5 fw-bolder",style:{"border-right":"2px solid #959595"}},"Proposals ",-1),V={class:"options"},Z=o("button",{class:"right-button"},"+ Create Proposals",-1),Q=[Z],W={key:0,class:"right-section-content",style:{height:"73.8vh","overflow-y":"scroll"}},S=["onClick"],I={class:"header"},q={class:"fw-bolder text-dark",style:{"font-size":"22px"}},G={key:0,style:{height:"35px"},class:"mb-1",src:v},N={key:0,class:"status active"},O={key:1,class:"status complete"},Y={key:2,class:"status complete"},z={class:"fw-bolder"},X={class:"text-dark",style:{height:"100px"}},H={class:"valid-till"},M=o("img",{src:y},null,-1),j=c("Time left \xA0"),D=o("img",{src:x},null,-1),J={key:0,class:"cheak"},$=o("img",{src:b,style:{height:"25px"}},null,-1),ee=c("Voting under process, result will be announced soon"),se=[$,ee],te={key:1,class:"cheak"},oe=o("img",{src:b,style:{height:"25px"}},null,-1),le=c("Comming soon"),re=[oe,le],ne={key:2,class:"cheak"},ie=o("img",{src:U,style:{height:"25px"}},null,-1),ae={key:1,class:"right-section-no-content"},ce=o("img",{src:T},null,-1),de=o("span",null,"There are no announcements currently. Let\u2019s wait for someone to broadcast. ",-1),Ae=[ce,de];function ue(e,s,i,u,a,l){return r(),n(C,null,[o("div",E,[K,o("div",V,[o("button",{onClick:s[0]||(s[0]=t=>l.getProposalList(-1)),class:A(a.index===-1?"selected":""),style:{"background-color":"#fff"}},"All",2),o("button",{onClick:s[1]||(s[1]=t=>l.getProposalList(1)),class:A(a.index===1?"selected":""),style:{"background-color":"#fff"}},"Active",2),o("button",{onClick:s[2]||(s[2]=t=>l.getProposalList(0)),class:A(a.index===0?"selected":""),style:{"background-color":"#fff"}},"Important",2),o("button",{onClick:s[3]||(s[3]=t=>l.getProposalList(2)),class:A(a.index===2?"selected":""),style:{"background-color":"#fff"}},"Complete",2)]),l.role<4?(r(),n("div",{key:0,onClick:s[4]||(s[4]=(...t)=>l.goCreateProposal&&l.goCreateProposal(...t)),class:"right-button-holder"},Q)):_("",!0)]),a.proposals.length>0?(r(),n("div",W,[(r(!0),n(C,null,R(a.proposals,t=>(r(),n("div",{onClick:w=>l.goProposalDetail(t._id),class:"block-container-proposal"},[o("div",I,[o("span",q,[c(d(l.trimmedProposalTitle(t.title))+" ",1),t.importance?(r(),n("img",G)):_("",!0)]),t.passed==1?(r(),n("span",N,"Active")):t.passed==0?(r(),n("span",O,"Active")):(r(),n("span",Y,"Complete"))]),o("span",z,"Broadcast by "+d(t.creator.name?l.trimmedAccountNameAndLowercase(t.creator.name)+"."+t.slug:l.trimmedAccountAddress(t.creator.address)),1),o("span",X,d(l.trimmedAnnounceSummary(t.description)),1),o("span",H,[M,j,D,c(" "+d(t.leftTime),1)]),t.passed==1?(r(),n("span",J,se)):t.passed==0?(r(),n("span",te,re)):(r(),n("span",ne,[ie,c(d(l.calculateWinner(t)),1)]))],8,S))),256))])):(r(),n("div",ae,Ae))],64)}var _e=F(B,[["render",ue]]);export{_e as default};
